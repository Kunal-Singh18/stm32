#include "stm32f4xx.h"

#define TIM4EN    (1U<<2)
#define CR1_CEN        (1U<<0)


void tim3_1hz_init(void)
{
	//enable clock access
	RCC->APB1ENR = TIM4EN;

	// set prescaler value
	TIM4->PSC = 1600 -1;  //   16000000 / 1600 = 10000
	// set auto reload value
	TIM4->ARR = 10000 -1; // 10000/10000 = 1;
	// clear counter
	TIM4->CNT =0;
	// enable timer
	TIM4->CR1 =CR1_CEN;

}

